1997-07-08  Miles Bader  <miles@gnu.ai.mit.edu>

	* bootstrap.c: Don't include "translate_root.h".
	(main): Don't call translate_root.
	Pass more than a single character to safe_gets.
	(DEFAULT_ROOT): New macro.
	(safe_gets): Make sure a newline exists before removing it.
	Ensure that the cursor moves to the beginning of the next line.
	* translate_root.c, translate_root.h: Files removed.
	* Makefile (SRCS): Remove translate_root.c.
	(LCLHDRS): Remove translate_root.h.

Fri Jun 20 15:37:15 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* bootstrap.c (main/script_paging_file): Instead of returning an
	error use new variable `had_a_partition' to record whether we
	successfully opened a partition.
	(main/script_default_pager): Only start pager if HAD_A_PARTITION;
	otherwise print warning message.

Mon Jun 16 11:52:40 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* Makefile (installationdir): Use `=' to set this instead of :=;
	$(prefix) is not yet available and `=' postpones the evaluation
	properly.   Reported by Marcus G. Daniels,
	marcus@cathcart.sysc.pdx.edu. 

Tue Jun 10 21:54:52 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* disk_inode.h (struct icommon): Use short instead of uid_t/gid_t
	in structure definition; those are now 32 bit types.
	
	* bootstrap.c (main): Support running from command line too; this
	is useful at least for simple debugging.

1997-06-09  Miles Bader  <miles@gnu.ai.mit.edu>

	* Makefile (LCLHDRS): Add mach-exec.h.

Thu May  1 18:40:53 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* bootstrap.c (cthread_stack_size): Don't set special value here;
	use the default.

Wed Apr 30 12:01:53 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* default_pager.c (default_pager_default_thread): Now that this is
 	forked, rather than run directly by the first thread, we have to
 	gain kernel privileges to acquire reserved pages.

Fri Apr 18 16:44:49 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* wiring.c (__vm_allocate): New function.

Wed Apr 16 14:18:28 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* default_pager.c (debug): Turn off.

Mon Apr 14 12:50:20 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* default_pager.c: Remove debugging printfs.

Thu Apr 10 15:10:25 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* Makefile (installationdir): Set variable.

Wed Apr  9 13:57:44 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* default_pager.c (default_pager_default_thread): New function.
	Delete old variable with this name, it was never used.
	(default_pager): Fork default_pager_default_thread instead of
	doing it here to avoid the possibility that we are on a tiny
	stack.  Current thread dies.

Thu Apr  3 20:00:58 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* elf-load.c (exec_load): Include <elf.h> instead of
	<mach/exec/elf.h>.  Include "mach-exec.h" instead of
	<mach/exec/elf.h>. 
	(exec_load) [i386]: Check for i386 types directly; abandon old
	MY_EI_DATA and MY_E_MACHINE.
	* load.c: Include "mach-exec.h" instead of <mach/exec/elf.h>.
	* exec.c: Likewise.
	* mach-exec.h: New file.

Wed Mar 19 14:45:27 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* panic.c (panic): Clear possible errors on stdout before printing
	panic string.

Mon Mar 17 13:13:50 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* wiring.c (wire_all_memory): Don't attempt wire if PROTECTION is
	VM_PROT_NONE. 

	* panic.c (panic): Be more informative about where the error is
	coming from. 

	* default_pager.c (create_paging_partition): Don't print
	gratuitous output noise.
	* load.c (boot_script_exec_cmd): Likewise.

Wed Mar 12 10:53:00 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* ext2_file_io.c (ext2_open_file): Clear FP before beginning
	work. 
	* ffs_file_io.c (ffs_open_file): Likewise.
	* minix_file_io.c (minix_open_file): Likewise.

	* bootstrap.c (printf_init, safe_gets): New functions.
	* console.c: Deleted file.
	* Makefile (SRCS): Omit console.c and gets.c.

	* load.c (read_symtab_from_file): Comment out body of function.
	We don't want this.

	* defs.h: Comment out redefinitions of common types.

	* default_pager.c: Include <cthreads.h> instead of
	<mach/cthreads.h>. 
	* file_io.h: Likewise.
	* kalloc.c: Likewise.

	* panic.c: Include <varargs.h> instead of <sys/varargs.h>.

	* default_pager.c (pager_read_offset): Cast return of NO_BLOCK
	properly. 

Mon Mar 10 17:07:50 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* load.c: Find boot_script.h in ../boot.
	* bootstrap.c: Likewise.

	* bootstrap.c (boot_panic): Repair syntax.

	* strfcns.c: Include <varargs.h> instead of <sys/varargs.h>.
	* load.c: Likewise.

